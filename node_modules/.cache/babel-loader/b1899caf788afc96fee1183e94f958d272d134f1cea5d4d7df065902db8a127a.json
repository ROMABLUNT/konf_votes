{"ast":null,"code":"var _jsxFileName = \"C:\\\\Roma\\\\repositories\\\\konf_votes\\\\src\\\\components\\\\ResultsPage\\\\ResultsPageContainer.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useParams } from 'react-router-dom';\nimport { fetchMembers } from '../../store/slices/membersSlice';\nimport { fetchReactionCounts } from '../../store/slices/resultsSlice';\nimport ResultsPage from './ResultsPage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ResultsPageContainer = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const dispatch = useDispatch();\n  const {\n    members\n  } = useSelector(state => state.members);\n  const resultsState = useSelector(state => state.results || {});\n  const results = resultsState.results || {};\n  const [loadingResults, setLoadingResults] = useState(true);\n  useEffect(() => {\n    dispatch(fetchMembers(id));\n  }, [id, dispatch]);\n  const fetchResults = useCallback(async () => {\n    if (members.length > 0) {\n      await Promise.all(members.map(async member => {\n        await dispatch(fetchReactionCounts(member.id)).unwrap();\n      }));\n      setLoadingResults(false);\n    }\n  }, [members, dispatch]);\n  useEffect(() => {\n    if (members.length > 0) {\n      fetchResults();\n      const interval = setInterval(fetchResults, 2000);\n      return () => clearInterval(interval);\n    }\n  }, [members, fetchResults]);\n  return /*#__PURE__*/_jsxDEV(ResultsPage, {\n    members: members,\n    results: results,\n    loading: loadingResults\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 10\n  }, this);\n};\n_s(ResultsPageContainer, \"OsTbxLEDtrR9om0a6eBJvhtMCEY=\", false, function () {\n  return [useParams, useDispatch, useSelector, useSelector];\n});\n_c = ResultsPageContainer;\nexport default ResultsPageContainer;\nvar _c;\n$RefreshReg$(_c, \"ResultsPageContainer\");","map":{"version":3,"names":["React","useEffect","useState","useCallback","useSelector","useDispatch","useParams","fetchMembers","fetchReactionCounts","ResultsPage","jsxDEV","_jsxDEV","ResultsPageContainer","_s","id","dispatch","members","state","resultsState","results","loadingResults","setLoadingResults","fetchResults","length","Promise","all","map","member","unwrap","interval","setInterval","clearInterval","loading","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Roma/repositories/konf_votes/src/components/ResultsPage/ResultsPageContainer.jsx"],"sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { useParams } from 'react-router-dom';\r\nimport { fetchMembers } from '../../store/slices/membersSlice';\r\nimport { fetchReactionCounts } from '../../store/slices/resultsSlice';\r\nimport ResultsPage from './ResultsPage';\r\n\r\nconst ResultsPageContainer = () => {\r\n  const { id } = useParams();\r\n  const dispatch = useDispatch();\r\n  const { members } = useSelector((state) => state.members);\r\n  const resultsState = useSelector((state) => state.results || {});\r\n  const results = resultsState.results || {};\r\n\r\n  const [loadingResults, setLoadingResults] = useState(true);\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchMembers(id));\r\n  }, [id, dispatch]);\r\n\r\n  const fetchResults = useCallback(async () => {\r\n    if (members.length > 0) {\r\n      await Promise.all(\r\n        members.map(async (member) => {\r\n          await dispatch(fetchReactionCounts(member.id)).unwrap();\r\n        })\r\n      );\r\n      setLoadingResults(false);\r\n    }\r\n  }, [members, dispatch]);\r\n\r\n  useEffect(() => {\r\n    if (members.length > 0) {\r\n      fetchResults();\r\n      const interval = setInterval(fetchResults, 2000);\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [members, fetchResults]);\r\n\r\n  return <ResultsPage members={members} results={results} loading={loadingResults} />;\r\n};\r\n\r\nexport default ResultsPageContainer;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,EAAEC,WAAW,QAAQ,OAAO;AAC/D,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,SAAS,QAAQ,kBAAkB;AAC5C,SAASC,YAAY,QAAQ,iCAAiC;AAC9D,SAASC,mBAAmB,QAAQ,iCAAiC;AACrE,OAAOC,WAAW,MAAM,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExC,MAAMC,oBAAoB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACjC,MAAM;IAAEC;EAAG,CAAC,GAAGR,SAAS,CAAC,CAAC;EAC1B,MAAMS,QAAQ,GAAGV,WAAW,CAAC,CAAC;EAC9B,MAAM;IAAEW;EAAQ,CAAC,GAAGZ,WAAW,CAAEa,KAAK,IAAKA,KAAK,CAACD,OAAO,CAAC;EACzD,MAAME,YAAY,GAAGd,WAAW,CAAEa,KAAK,IAAKA,KAAK,CAACE,OAAO,IAAI,CAAC,CAAC,CAAC;EAChE,MAAMA,OAAO,GAAGD,YAAY,CAACC,OAAO,IAAI,CAAC,CAAC;EAE1C,MAAM,CAACC,cAAc,EAAEC,iBAAiB,CAAC,GAAGnB,QAAQ,CAAC,IAAI,CAAC;EAE1DD,SAAS,CAAC,MAAM;IACdc,QAAQ,CAACR,YAAY,CAACO,EAAE,CAAC,CAAC;EAC5B,CAAC,EAAE,CAACA,EAAE,EAAEC,QAAQ,CAAC,CAAC;EAElB,MAAMO,YAAY,GAAGnB,WAAW,CAAC,YAAY;IAC3C,IAAIa,OAAO,CAACO,MAAM,GAAG,CAAC,EAAE;MACtB,MAAMC,OAAO,CAACC,GAAG,CACfT,OAAO,CAACU,GAAG,CAAC,MAAOC,MAAM,IAAK;QAC5B,MAAMZ,QAAQ,CAACP,mBAAmB,CAACmB,MAAM,CAACb,EAAE,CAAC,CAAC,CAACc,MAAM,CAAC,CAAC;MACzD,CAAC,CACH,CAAC;MACDP,iBAAiB,CAAC,KAAK,CAAC;IAC1B;EACF,CAAC,EAAE,CAACL,OAAO,EAAED,QAAQ,CAAC,CAAC;EAEvBd,SAAS,CAAC,MAAM;IACd,IAAIe,OAAO,CAACO,MAAM,GAAG,CAAC,EAAE;MACtBD,YAAY,CAAC,CAAC;MACd,MAAMO,QAAQ,GAAGC,WAAW,CAACR,YAAY,EAAE,IAAI,CAAC;MAChD,OAAO,MAAMS,aAAa,CAACF,QAAQ,CAAC;IACtC;EACF,CAAC,EAAE,CAACb,OAAO,EAAEM,YAAY,CAAC,CAAC;EAE3B,oBAAOX,OAAA,CAACF,WAAW;IAACO,OAAO,EAAEA,OAAQ;IAACG,OAAO,EAAEA,OAAQ;IAACa,OAAO,EAAEZ;EAAe;IAAAa,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;AACrF,CAAC;AAACvB,EAAA,CAjCID,oBAAoB;EAAA,QACTN,SAAS,EACPD,WAAW,EACRD,WAAW,EACVA,WAAW;AAAA;AAAAiC,EAAA,GAJ5BzB,oBAAoB;AAmC1B,eAAeA,oBAAoB;AAAC,IAAAyB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}