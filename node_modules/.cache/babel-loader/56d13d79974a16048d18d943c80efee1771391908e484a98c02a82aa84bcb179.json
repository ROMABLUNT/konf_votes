{"ast":null,"code":"import React,{useEffect,useState,useCallback}from'react';import{useSelector,useDispatch}from'react-redux';import{useParams}from'react-router-dom';import{fetchMembers}from'../../store/slices/membersSlice';import{fetchReactionCounts}from'../../store/slices/resultsSlice';import ResultsPage from'./ResultsPage';import{jsx as _jsx}from\"react/jsx-runtime\";const ResultsPageContainer=()=>{const{id}=useParams();const dispatch=useDispatch();const{members}=useSelector(state=>state.members);const resultsState=useSelector(state=>state.results||{});const results=resultsState.results||{};const[loadingResults,setLoadingResults]=useState(true);useEffect(()=>{dispatch(fetchMembers(id));},[id,dispatch]);const fetchResults=useCallback(async()=>{if(members.length>0){await Promise.all(members.map(async member=>{await dispatch(fetchReactionCounts(member.id)).unwrap();}));setLoadingResults(false);}},[members,dispatch]);useEffect(()=>{if(members.length>0){fetchResults();const interval=setInterval(fetchResults,2000);return()=>clearInterval(interval);}},[members,fetchResults]);return/*#__PURE__*/_jsx(ResultsPage,{members:members,results:results,loading:loadingResults});};export default ResultsPageContainer;","map":{"version":3,"names":["React","useEffect","useState","useCallback","useSelector","useDispatch","useParams","fetchMembers","fetchReactionCounts","ResultsPage","jsx","_jsx","ResultsPageContainer","id","dispatch","members","state","resultsState","results","loadingResults","setLoadingResults","fetchResults","length","Promise","all","map","member","unwrap","interval","setInterval","clearInterval","loading"],"sources":["C:/Roma/repositories/konf_votes/src/components/ResultsPage/ResultsPageContainer.jsx"],"sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { useParams } from 'react-router-dom';\r\nimport { fetchMembers } from '../../store/slices/membersSlice';\r\nimport { fetchReactionCounts } from '../../store/slices/resultsSlice';\r\nimport ResultsPage from './ResultsPage';\r\n\r\nconst ResultsPageContainer = () => {\r\n  const { id } = useParams();\r\n  const dispatch = useDispatch();\r\n  const { members } = useSelector((state) => state.members);\r\n  const resultsState = useSelector((state) => state.results || {});\r\n  const results = resultsState.results || {};\r\n\r\n  const [loadingResults, setLoadingResults] = useState(true);\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchMembers(id));\r\n  }, [id, dispatch]);\r\n\r\n  const fetchResults = useCallback(async () => {\r\n    if (members.length > 0) {\r\n      await Promise.all(\r\n        members.map(async (member) => {\r\n          await dispatch(fetchReactionCounts(member.id)).unwrap();\r\n        })\r\n      );\r\n      setLoadingResults(false);\r\n    }\r\n  }, [members, dispatch]);\r\n\r\n  useEffect(() => {\r\n    if (members.length > 0) {\r\n      fetchResults();\r\n      const interval = setInterval(fetchResults, 2000);\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [members, fetchResults]);\r\n\r\n  return <ResultsPage members={members} results={results} loading={loadingResults} />;\r\n};\r\n\r\nexport default ResultsPageContainer;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,CAAEC,WAAW,KAAQ,OAAO,CAC/D,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,SAAS,KAAQ,kBAAkB,CAC5C,OAASC,YAAY,KAAQ,iCAAiC,CAC9D,OAASC,mBAAmB,KAAQ,iCAAiC,CACrE,MAAO,CAAAC,WAAW,KAAM,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAExC,KAAM,CAAAC,oBAAoB,CAAGA,CAAA,GAAM,CACjC,KAAM,CAAEC,EAAG,CAAC,CAAGP,SAAS,CAAC,CAAC,CAC1B,KAAM,CAAAQ,QAAQ,CAAGT,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAEU,OAAQ,CAAC,CAAGX,WAAW,CAAEY,KAAK,EAAKA,KAAK,CAACD,OAAO,CAAC,CACzD,KAAM,CAAAE,YAAY,CAAGb,WAAW,CAAEY,KAAK,EAAKA,KAAK,CAACE,OAAO,EAAI,CAAC,CAAC,CAAC,CAChE,KAAM,CAAAA,OAAO,CAAGD,YAAY,CAACC,OAAO,EAAI,CAAC,CAAC,CAE1C,KAAM,CAACC,cAAc,CAAEC,iBAAiB,CAAC,CAAGlB,QAAQ,CAAC,IAAI,CAAC,CAE1DD,SAAS,CAAC,IAAM,CACda,QAAQ,CAACP,YAAY,CAACM,EAAE,CAAC,CAAC,CAC5B,CAAC,CAAE,CAACA,EAAE,CAAEC,QAAQ,CAAC,CAAC,CAElB,KAAM,CAAAO,YAAY,CAAGlB,WAAW,CAAC,SAAY,CAC3C,GAAIY,OAAO,CAACO,MAAM,CAAG,CAAC,CAAE,CACtB,KAAM,CAAAC,OAAO,CAACC,GAAG,CACfT,OAAO,CAACU,GAAG,CAAC,KAAO,CAAAC,MAAM,EAAK,CAC5B,KAAM,CAAAZ,QAAQ,CAACN,mBAAmB,CAACkB,MAAM,CAACb,EAAE,CAAC,CAAC,CAACc,MAAM,CAAC,CAAC,CACzD,CAAC,CACH,CAAC,CACDP,iBAAiB,CAAC,KAAK,CAAC,CAC1B,CACF,CAAC,CAAE,CAACL,OAAO,CAAED,QAAQ,CAAC,CAAC,CAEvBb,SAAS,CAAC,IAAM,CACd,GAAIc,OAAO,CAACO,MAAM,CAAG,CAAC,CAAE,CACtBD,YAAY,CAAC,CAAC,CACd,KAAM,CAAAO,QAAQ,CAAGC,WAAW,CAACR,YAAY,CAAE,IAAI,CAAC,CAChD,MAAO,IAAMS,aAAa,CAACF,QAAQ,CAAC,CACtC,CACF,CAAC,CAAE,CAACb,OAAO,CAAEM,YAAY,CAAC,CAAC,CAE3B,mBAAOV,IAAA,CAACF,WAAW,EAACM,OAAO,CAAEA,OAAQ,CAACG,OAAO,CAAEA,OAAQ,CAACa,OAAO,CAAEZ,cAAe,CAAE,CAAC,CACrF,CAAC,CAED,cAAe,CAAAP,oBAAoB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}